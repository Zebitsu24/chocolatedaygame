<!DOCTYPE html>
<html>
<head>
  <title>Level 2 - Memory Match</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
</head>
<body>
<img class="cat right"
     src="https://media.giphy.com/media/mlvseq9yvZhba/giphy.gif"
     alt="Memory Cat">

<div class="container">
  <h2>ğŸ± Level 2: Agent Memory</h2>
  <p>Match the Valorant Cat Agents!</p>

  <div class="grid" id="grid"></div>

  <p id="msg" class="soft"></p>

  <a id="next" href="level3.html" class="btn hidden">FINAL LEVEL ğŸ’–</a>
</div>

<script>
const cards = [
  "cat1.jpg","cat1.jpg",
  "cat2.jpg","cat2.jpg",
  "cat3.jpg","cat3.jpg"
];

let first = null;
let lock = false;
let matched = 0;

cards.sort(() => 0.5 - Math.random());

const grid = document.getElementById("grid");

cards.forEach(src => {
  const card = document.createElement("div");
  card.className = "card";

  const img = document.createElement("img");
  img.src = "back.jpg"; // card back image (JPG)
  img.className = "card-img";

  card.appendChild(img);

  card.onclick = () => {
    if (lock || img.dataset.open === "true") return;

    img.src = src;
    img.dataset.open = "true";

    if (!first) {
      first = img;
    } else {
      if (first.src.includes(src)) {
        matched += 2;
        first = null;

        if (matched === cards.length) {
          document.getElementById("msg").innerText =
            "Purrfect memory ğŸ˜» Zebitsu is proud!";
          document.getElementById("next").classList.remove("hidden");
        }
      } else {
        lock = true;
        setTimeout(() => {
          first.src = "back.jpg";
          first.dataset.open = "false";
          img.src = "back.jpg";
          img.dataset.open = "false";
          first = null;
          lock = false;
        }, 800);
      }
    }
  };

  grid.appendChild(card);
});
</script>


</body>
</html>
